<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step14_promise.html</title>
</head>
<body>
    <h3>이미지를 선택하세요</h3>
    <input type="file" id="fileInput" accept="image/*" multiple>
    <div id="preview"></div>
    <script>
        //이미지 파일을 선택했을때 실행할 함수 등록
        document.querySelector("#fileInput").addEventListener("change", (e)=>{
            // e.target 은 "change" 이벤트가 발생한 바로 그 요소의 참조값
            //선택된 파일객체가 들어있는 배열
            //const files = document.querySelector("#fileInput").files;
            const files = e.target.files;
            //FileReader 객체를 이용해서 선택한 파일데이터를 읽어들인다.
            const reader=new FileReader();
            // files 배열의 0 번방에 들어 있는 파일을 DataURL 형식으로 읽어들이고
            reader.readAsDataURL(files[0]);
            // 다 읽었을때 실행할 함수 등록 
            reader.onload = ()=>{
                //읽은 DataURL 형식의 문자열을 콘솔창에 출력하기
                console.log(reader.result);
                // backtic 을 이용해서 html 형식의 문자열을 구성하고
                const img=`<img src="${reader.result}">`;
                // id 가 preview 인 곳에 HTML 로 해석이 되도록 끼워 넣는다 
                document.querySelector("#preview").insertAdjacentHTML("beforeend", img);
            };
            console.log("FileReader 객체를 이용해서 읽기시작!");
        });
    </script>
</body>
</html>