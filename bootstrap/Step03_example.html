<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step03_example.html</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
</head>
<body>
    <div class="container">
        <h3>폼 유효성 검증 상태 표시하기</h3>
        <form id="joinForm" novalidate>
        <!-- 아이디 -->
        <div class="mb-3">
            <label for="userName" class="form-label">아이디</label>
            <input type="text" id="userName" class="form-control" />
            <div class="invalid-feedback">5글자 이상 입력하세요</div>
            <div class="valid-feedback">사용 가능한 아이디입니다</div>
        </div>

        <!-- 비밀번호 -->
        <div class="mb-3">
            <label for="pwd" class="form-label">비밀번호</label>
            <input type="password" id="pwd" class="form-control" />
            <div class="form-text text-muted">
                비밀번호는 8글자 이상 입력하세요
            </div>
            <div class="invalid-feedback">비밀번호를 확인하세요</div>
            <div class="valid-feedback">사용 가능한 비밀번호입니다</div>
        </div>

        <!-- 비밀번호 확인 -->
        <div class="mb-3">
            <label for="pwd2" class="form-label">비밀번호 확인</label>
            <input type="password" id="pwd2" class="form-control" />
            <div class="invalid-feedback">비밀번호가 일치하지 않습니다</div>
            <div class="valid-feedback">비밀번호가 일치합니다</div>
        </div>

        <button type="submit" class="btn btn-primary">가입</button>
        </form>
    </div>
    <script>
        // userName 입력란의 참조값 
        const userNameInput = document.querySelector("#userName");
        // pwd 입력란의 참조값 
        const pwdInput = document.querySelector("#pwd");
        // pwd2 입력란의 참조값
        const pwd2Input = document.querySelector("#pwd2");

        function pwdEqualValidate(){
            //입력한 2개의 비밀번호를 읽어와서 
            const pwd = pwdInput.value;
            const pwd2 = pwd2Input.value;
             //일단 모든 클래스를 제거하고 
            pwd2Input.classList.remove("is-valid", "is-invalid");
            //두 비밀번호가 같은지 확인해서 적절한 클래스를 추가한다
            pwd2Input.classList.add(pwd == pwd2 ? "is-valid":"is-invalid");
        }


        pwdInput.addEventListener("input", ()=>{
            //입력한 pwd 을 읽어온다.
            const pwd=pwdInput.value;
            //입력한 값을 검증한다
            const pwdValid = pwd.length >= 8  ? true : false;
            //일단 모든 클래스를 제거하고 
            pwdInput.classList.remove("is-valid", "is-invalid");
            //검증 결과에 맞는 클래스를 추가한다
            pwdInput.classList.add(pwdValid ? "is-valid":"is-invalid");
            pwdEqualValidate();
        });
         pwd2Input.addEventListener("input", ()=>{
            pwdEqualValidate();
         });


        userNameInput.addEventListener("input", ()=>{
            //입력한 userName 을 읽어온다.
            const userName=userNameInput.value;
            //입력한 값을 검증한다
            const userNameValid = userName.length >= 5  ? true : false;
            //일단 모든 클래스를 제거하고 
            userNameInput.classList.remove("is-valid", "is-invalid");
            //검증 결과에 맞는 클래스를 추가한다
            userNameInput.classList.add(userNameValid ? "is-valid":"is-invalid");
        });
    </script>
</body>
</html>